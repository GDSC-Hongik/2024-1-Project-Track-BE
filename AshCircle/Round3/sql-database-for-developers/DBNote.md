# Database & MySQL Note

### SQL로 하는 데이터 분석

- **Primary Key**

    테이블에서 특정 row 하나를 식별하는 역할을 한다.

    - **Natural key**
        
        실제로 개체가 가지고 있는 속성을 나타내는 column이 key가 되었을 경우, 이를 **Natural Key**라고 한다. *(ex. ISBN, EMail)*

    - **Surrogate Key**
        
        인위적으로 생성한 column. 주로 1부터 순차적으로 증가하는 숫자가 들어간다. 보통 PK로는 Surrogate Key를 선택하는 경우가 많다.

- **SQL 문법**

    - **예약어**

        예약어(`SELECT`, `FROM`, `WHERE` 등)은 소문자로 써도 실행에 문제는 없으나, 가독성을 위해 대문자로 쓰는 편을 권장한다.

    - **작성 순서**와 **실행 순서**
    
        SQL문은 작성 순서를 엄격하게 지켜야 실행시에 문제가 생기지 않는다.

        - 작성 순서

            `SELECT`, `FROM`, `WHERE`, `GROUP BY`, `HAVING`, `ORDER BY`, `LIMIT`

        작성 순서와는 다르게, SQL문은 다음의 우선순위를 가지고 해석된다.

        - 실행 순서

            `FROM` : 어느 테이블을 대상으로 할 것인지를 먼저 결정합니다.
            
            `WHERE` : 해당 테이블에서 특정 조건을 만족하는 row들만 선별합니다.
            
            `GROUP BY` : row들을 그루핑 기준대로 그루핑합니다. 
            
            `HAVING` : 그루핑 작업 후 생성된 여러 그룹들 중에서, 특정 조건(들)을 만족하는 그룹들만 선별합니다.
            
            `SELECT` : 모든 컬럼 또는 특정 컬럼들을 조회합니다.
            
            `ORDER BY` : 각 row를 특정 기준에 따라서 정렬합니다.
            
            `LIMIT` : 이전 단계까지 조회된 row들 중 일부 row들만을 추립니다.

### SQL로 하는 데이터 관리

- **물리 삭제**와 **논리 삭제**

    - **물리 삭제**

        데이터를 삭제할 때 row를 바로 삭제하는 것을 말한다. `DELETE`가 활용된다.

    - **논리 삭제**

        데이터를 삭제할 때 row를 바로 삭제하는 것이 아닌, 삭제 여부를 나타내는 별도의 값을 넣는 것을 말한다. 즉 실제 데이터는 보존되며, `UPDATE`가 활용된다.

    회사에서는 정책상의 이유로 물리 삭제가 아닌 논리 삭제를 선호한다. 삭제를 요청한 정보라도 향후 기업의 데이터 활용 및 범죄 수사 등에 쓰일 수 있기 때문이다.
    
    실제로 여러 기업 서비스의 고객 약관을 참조해보면 고객의 개인정보 보관 기간을 명시해놓음을 확인할 수 있다.
    
    이를 통해서, 고객이 서비스 이용을 중단한다면, 기업은 고객의 개인정보를 논리 삭제를 통해 보관한 후, 물리 삭제를 통해 이를 파기함을 확인할 수 있다.

### 데이터베이스 모델링

- **ERM과 ERD**

    **ERM(*Entity Relationship Model*)** 은 개체-관계 모델링을 의미한다. 모델링을 할 때, Entity를 나타내는 사각형 안에 Attibute들을 문자열로 넣어주고, 각 Entity를 연결하는 선으로 Relationship을 표현한다.

    [ERDCloud](https://www.erdcloud.com/) 에서는 이러한 ERM & ERD(Diagram)를 그리고 SQL로 추출하는 기능 또한 지원한다.
